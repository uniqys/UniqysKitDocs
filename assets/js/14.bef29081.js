(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{175:function(t,a,r){"use strict";r.r(a);var s=r(0),e=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"content"},[r("h1",{attrs:{id:"ブロックチェーン"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ブロックチェーン","aria-hidden":"true"}},[t._v("#")]),t._v(" ブロックチェーン")]),t._v(" "),r("h2",{attrs:{id:"データ構造"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#データ構造","aria-hidden":"true"}},[t._v("#")]),t._v(" データ構造")]),t._v(" "),r("p",[t._v("Chain Coreの生成するブロックチェーンの各ブロックのヘッダには以下のデータを保持しています。")]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("height")]),t._v(": ブロックの高さ")]),t._v(" "),r("li",[r("strong",[t._v("timestamp")]),t._v(": ブロックが生成された時間のタイムスタンプ")]),t._v(" "),r("li",[r("strong",[t._v("lastBlockHash")]),t._v(": 前ブロックのハッシュ値")]),t._v(" "),r("li",[r("strong",[t._v("transactionRoot")]),t._v(": トランザクションのマークルルート")]),t._v(" "),r("li",[r("strong",[t._v("lastBlockConsensusRoot")]),t._v(": 前ブロックのコンセンサスのマークルルート")]),t._v(" "),r("li",[r("strong",[t._v("nextValidatorSetRoot")]),t._v(": 次ブロックのバリデータセットのマークルルート")]),t._v(" "),r("li",[r("strong",[t._v("appStateHash")]),t._v(": アプリケーションの状態")])]),t._v(" "),r("h2",{attrs:{id:"前後のブロックの関係"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#前後のブロックの関係","aria-hidden":"true"}},[t._v("#")]),t._v(" 前後のブロックの関係")]),t._v(" "),r("p",[t._v("Chain Coreのブロックチェーンでは、前後のブロックの関係により、あるトランザクションは含められたブロックの2つ先のブロックで、その実行結果が保証されます。")]),t._v(" "),r("p",[t._v("高さNのブロックをブロック(N)と表記します。")]),t._v(" "),r("h3",{attrs:{id:"トランザクション"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#トランザクション","aria-hidden":"true"}},[t._v("#")]),t._v(" トランザクション")]),t._v(" "),r("h4",{attrs:{id:"ブロック-n"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ブロック-n","aria-hidden":"true"}},[t._v("#")]),t._v(" ブロック(N)")]),t._v(" "),r("p",[t._v("このブロックに含められたトランザクションは、ブロックの承認後にアプリケーションへリクエストとして送信されます。")]),t._v(" "),r("h4",{attrs:{id:"ブロック-n-1"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ブロック-n-1","aria-hidden":"true"}},[t._v("#")]),t._v(" ブロック(N+1)")]),t._v(" "),r("p",[t._v("ブロック(N)で承認されたトランザクションがアプリケーション上で実行され、このブロックの"),r("code",[t._v("appState")]),t._v("（アプリケーションの状態）として取り込まれます。")]),t._v(" "),r("h3",{attrs:{id:"コンセンサス"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#コンセンサス","aria-hidden":"true"}},[t._v("#")]),t._v(" コンセンサス")]),t._v(" "),r("h4",{attrs:{id:"ブロック-n-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ブロック-n-2","aria-hidden":"true"}},[t._v("#")]),t._v(" ブロック(N)")]),t._v(" "),r("p",[t._v("ブロック(N)のコンセンサスは、NにおけるバリデータセットによってTendermintアルゴリズムが実行され、バリデータセット全体の投票力の2/3よりも多くの投票力を持つ署名が集まるとコンセンサスに至ります。\nただし、このブロック(N)にはこの署名の集合は含まれません。\nこれは、署名の集合自体をコンセンサスの対象となるブロックの中身に含めることができるようにするためです。\n署名は2/3よりも多く投票力があれば異なる集合でも正しいコンセンサスの証拠となりますが、コンセンサスの対象に含めることで同一の集合に合意を得ることができます。")]),t._v(" "),r("h4",{attrs:{id:"ブロック-n-1-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ブロック-n-1-2","aria-hidden":"true"}},[t._v("#")]),t._v(" ブロック(N+1)")]),t._v(" "),r("p",[t._v("ブロック(N+1)は、一つ前のブロック(N)の署名の集合である"),r("code",[t._v("lastBlockConsensus")]),t._v("が含まれます。\nこのブロック(N+1)のコンセンサスが得られると、ブロック(N)の署名の集合が同一のものに合意が取れたことになります。")]),t._v(" "),r("div",{staticClass:"tip custom-block"},[r("p",{staticClass:"custom-block-title"},[t._v("ポイント")]),t._v(" "),r("p",[t._v("あるブロックは次のブロックの"),r("code",[t._v("lastBlockConsensus")]),t._v("でコンセンサスが含められることによってファイナリティを得られるといえます。\nつまり、ブロック(N-1)で含められたトランザクションは、その実行結果がブロック(N)でブロックに含められ、ブロック(N+1)で実行結果が保証されるということになります。")])]),t._v(" "),r("h3",{attrs:{id:"バリデータ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#バリデータ","aria-hidden":"true"}},[t._v("#")]),t._v(" バリデータ")]),t._v(" "),r("h4",{attrs:{id:"ブロック-n-3"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ブロック-n-3","aria-hidden":"true"}},[t._v("#")]),t._v(" ブロック(N)")]),t._v(" "),r("p",[t._v("ブロックデータの"),r("code",[t._v("nextValidatorSet")]),t._v("により、ブロック(N)はブロック(N+1)のバリデータセットを保持します。\nこれは、バリデータセットを変更可能にするためです。")]),t._v(" "),r("h4",{attrs:{id:"ブロック-n-1-3"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ブロック-n-1-3","aria-hidden":"true"}},[t._v("#")]),t._v(" ブロック(N+1)")]),t._v(" "),r("p",[t._v("ブロック(N+1)のコンセンサスを得る際は、ブロック(N)の"),r("code",[t._v("nextValidatorSet")]),t._v("のノードからの署名が集められます。")])])}],!1,null,null,null);e.options.__file="blockchain.md";a.default=e.exports}}]);